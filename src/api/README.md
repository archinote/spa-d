# Общие модули Dantser API
Содержит набор модулей для обращения клиента к серверу.

## Использование в приложении
Приложение может импортировать как итоговый модуль API пакета dms-base, который содержит базовый набор всех API-модулей (например, модуль аккаунта), так и один или несколько вложенных модулей - только те, что ему необходимы. 

Как правило, не само приложение импортирует какой-либо из модулей API, а модуль хранилища (Store).

Пример:

```js
// импорт всего API (корневого модуля)
import { api } from 'dms-base/api'

// или
// импорт одного вложенного модуля API
import { apiCrm } from 'dms-base/api/crm'
```

## Реализация собственного API-модуля
Если приложению необходимо реализовать свой модуль API, оно должно импортировать базовый API-класс (ApiModule) и использовать его как родительский класс при создании потомка.

### Соглашение об именовании
API-класс (потомок ApiModule) должен начинаться в названии с букв Api, например, ApiCrm или ApiAccount. Экземпляры класса также должны начинаться с букв "api", но строчных, например apiCrm, apiAccount.

### Структура каталога API-модуля

```
.                           # Папка с название модуля
├── ...
├── common                  # Папка с публичным разделом модуля
│   ├── index.js            # Модуль с реализацией потомка ApiModule
│   ├── routes.js           # Используемые пути для бращения к серверу
│   └── README.md           # Описание класса и его методов 
├── management              # Папка с реализацией внутренних разделов модуля
│   ├── index.js            # Модуль с реализацией потомка ApiModule
│   ├── routes.js           # Используемые пути для бращения к серверу
│   └── README.md           # Описание класса и его методов 
└── index.js                # Экспорт публичного раздела модуля для общего использоания
```

### Пример реализации

```js
import { ApiModule } from 'dms-base/api/api-module'
import routes from './routing'

class ApiCRM extends ApiModule {

  //
  // реализация методов 
  // ...

  list () {
    // Обращение к серверу для получения списка сущностей
    // ...
    return list
  }
}

// 
let apiCrm = new ApiCrm('')

// Экспорт класса нового API-модуля и его экземпляра
export { ApiCrm, apiCrm }
```

## Класс Http-клиента
Каждый модуль использует либо общий экземпляр http-клиента, либо при необходимости может объявить и использовать свой экземпляр (например, для использования им оригинальных параметров и настроек).

Из этого класса создается базовый экземпляр клиента. Модуль с объявлением этого класса экспортирует как сам класс, так и экземпляр класса, который используется в классе ApiModule.
